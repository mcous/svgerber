!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b,c,d,e,f,g,h,i,j,k,l,m;e=a("gerber-to-svg"),j=function(){var a;return $("#filelist").children().not("#js-upload-template").remove(),$("#upload-list").addClass("hidden"),$("a.nav-link").parent().removeClass("active").addClass("disabled"),$("#nav-upload").removeClass("disabled").addClass("active"),a=$("#individual-layer-output"),a.find("div.layer-drawing").data("full",!1),a.find("svg").remove(),a.find("a.layer-link").attr("href","#"),a.addClass("hidden")},b=function(a){var b;return b=$("#process").text("svGo!"),b.on("click",function(c){var d,e,g;return c.stopPropagation(),c.preventDefault(),b.off("click"),b.attr("disabled","disabled"),b.text("svGoing!"),g=$("#individual-layer-output"),g.removeClass("hidden").css("visibility","hidden"),e=-1,d=function(){return e++,e<a.length?f(a[e],d):(g.css("visibility","visible"),b.text("svGone!"),$("#nav-svgs").removeClass("disabled"),$("html, body").animate({scrollTop:$("#individual-layer-output").offset().top-$("#top-nav").height()-10},250))},setTimeout(d,50),!1}),$("#nav-layers").removeClass("disabled"),b.removeAttr("disabled"),$("html, body").animate({scrollTop:$("#upload-list").offset().top-$("#top-nav").height()-10},250)},k=function(a,b){var c,d;return d="oth",b.match(/(\.gtl)|(\.cmp)$/i)?d="fcu":b.match(/(\.gts)|(\.stc)$/i)?d="fsm":b.match(/(\.gto)|(\.plc)$/i)?d="fss":b.match(/(\.gbl)|(\.sol)$/i)?d="bcu":b.match(/(\.gbs)|(\.sts)$/i)?d="bsm":b.match(/(\.gbo)|(\.pls)$/i)?d="bss":b.match(/(\.gko$)|edge/i)&&(d="out"),c=a.children("[value='"+d+"']").attr("selected","selected"),d},f=function(a,b){var c,d,f,g,h,i,j,k,l,m,n;return d=a.filename,l=$(document.getElementById("js-layer-select-"+d)),g=l.find(":selected").attr("value"),k=document.getElementById("js-plot-progress-"+d),c=0,h=4,"oth"===g?(k.setAttribute("aria-valuenow","100"),k.style.width="100%",void(null!=b&&"function"==typeof b&&b())):(a=a.file,m=null,i=null,f=$(document.getElementById("js-upload-"+d)).children(".mega-octicon"),f.removeClass("octicon-chevron-right"),f.addClass("octicon-pencil"),j=$("#"+g),m=e(a),j.html(m),n="data:image/svg+xml;base64,"+m,j.siblings("a.layer-link").attr("href",n),f.removeClass("octicon-pencil"),f.addClass("octicon-check"),k.setAttribute("aria-valuenow","100"),k.style.width="100%",null!=b&&"function"==typeof b?b():void 0)},l=function(a,b,c){var d,e;return d=a.detail,null!=d.current&&(e=Math.round(d.current/d.total*100),100>=e)?(c["aria-valuenow"]=""+e,c.style.width=""+e+"%"):void 0},h=function(a){var c,d,e,f,g,h;for(a.stopPropagation(),a.preventDefault(),j(),d=null,null!=a.dataTransfer?(d=a.dataTransfer.files,a.dataTransfer.files=null):(d=a.target.files,a.target.files=null),$("#upload-list").removeClass("hidden"),e=[],h=[],f=0,g=d.length;g>f;f++)c=d[f],h.push(function(a){var c,f,g,h,i,j;return j=$("#js-upload-template"),c=j.clone().attr("id","js-upload-"+a.name),g=c.find(".filename"),g.text(""+a.name),f=c.find(".layer-type-select"),f.attr("id","js-layer-select-"+a.name),g=k(f,a.name),h=c.find("#js-plot-progress-template"),h.attr("id","js-plot-progress-"+a.name),h.attr("aria-valuenow","0").width("0%"),c.removeClass("js-template"),j.after(c),i=new FileReader,i.onloadend=function(c){return c.stopPropagation(),c.preventDefault(),c.target.readyState===FileReader.DONE&&(e.push({filename:a.name,file:c.target.result,name:g}),e.length===d.length)?b(e):void 0},i.readAsText(a)}(c));return h},g=function(a){return a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"},c=document.getElementById("dropzone"),c.addEventListener("dragover",g,!1),c.addEventListener("drop",h,!1),d=document.getElementById("file-upload-select"),d.addEventListener("change",h,!1),i=$("a.nav-link"),$("a.nav-link").on("click",function(a){var b,c,d;return a.stopPropagation(),a.preventDefault(),b=$(this),d=b.parent(),d.hasClass("disabled")?void 0:(c=b.attr("href").split("#")[1],$("html, body").animate({scrollTop:$("#"+c).offset().top-$("#top-nav").height()-10},250))}),$("#title").on("click",function(a){var b;return a.stopPropagation(),a.preventDefault(),b=$(this).children("a"),j(),$("html, body").animate({scrollTop:0},250)}),m=$(window),m.scroll(function(){var a,b;return b=m.scrollTop()+m.height()/2,(a=$("#nav-upload")).hasClass("active")||(a.siblings().removeClass("active"),a.addClass("active")),b>=$("#upload-list").offset().top-$("#top-nav").height()-10&&((a=$("#nav-layers")).hasClass("disabled")||(a.siblings().removeClass("active"),a.addClass("active"))),b>=$("#individual-layer-output").offset().top-$("#top-nav").height()-10&&!(a=$("#nav-svgs")).hasClass("disabled")?(a.siblings().removeClass("active"),a.addClass("active")):void 0})},{"gerber-to-svg":23}],2:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e,f=typeof a;if("number"===f)e=a>0?a>>>0:0;else if("string"===f)"base64"===b&&(a=C(a)),e=d.byteLength(a,b);else{if("object"!==f||null===a)throw new Error("First argument needs to be a number, array or string.");"Buffer"===a.type&&E(a.data)&&(a=a.data),e=+a.length>0?Math.floor(+a.length):0}var g;T?g=d._augment(new Uint8Array(e)):(g=this,g.length=e,g._isBuffer=!0);var h;if(T&&"number"==typeof a.byteLength)g._set(a);else if(F(a))if(d.isBuffer(a))for(h=0;e>h;h++)g[h]=a.readUInt8(h);else for(h=0;e>h;h++)g[h]=(a[h]%256+256)%256;else if("string"===f)g.write(a,0,b);else if("number"===f&&!T&&!c)for(h=0;e>h;h++)g[h]=0;return g}function e(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;Q(f%2===0,"Invalid hex string"),d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);Q(!isNaN(h),"Invalid hex string"),a[c+g]=h}return g}function f(a,b,c,d){var e=L(H(b),a,c,d);return e}function g(a,b,c,d){var e=L(I(b),a,c,d);return e}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,d){var e=L(K(b),a,c,d);return e}function j(a,b,c,d){var e=L(J(b),a,c,d);return e}function k(a,b,c){return R.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=M(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+M(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=G(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(void 0!==b&&null!==b,"missing offset"),Q(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(b+3<a.length,"Trying to read beyond buffer length")),S.read(a,b,c,23,4)}function v(a,b,c,d){return d||(Q("boolean"==typeof c,"missing or invalid endian"),Q(b+7<a.length,"Trying to read beyond buffer length")),S.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+1<a.length,"trying to write beyond buffer length"),N(b,65535));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g);return c+2}}function x(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"trying to write beyond buffer length"),N(b,4294967295));var f=a.length;if(!(c>=f)){for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255;return c+4}}function y(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+1<a.length,"Trying to write beyond buffer length"),O(b,32767,-32768));var f=a.length;if(!(c>=f))return b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e),c+2}function z(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"Trying to write beyond buffer length"),O(b,2147483647,-2147483648));var f=a.length;if(!(c>=f))return b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e),c+4}function A(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+3<a.length,"Trying to write beyond buffer length"),P(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;if(!(c>=f))return S.write(a,b,c,d,23,4),c+4}function B(a,b,c,d,e){e||(Q(void 0!==b&&null!==b,"missing value"),Q("boolean"==typeof d,"missing or invalid endian"),Q(void 0!==c&&null!==c,"missing offset"),Q(c+7<a.length,"Trying to write beyond buffer length"),P(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;if(!(c>=f))return S.write(a,b,c,d,52,8),c+8}function C(a){for(a=D(a).replace(V,"");a.length%4!==0;)a+="=";return a}function D(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function E(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function F(a){return E(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function G(a){return 16>a?"0"+a.toString(16):a.toString(16)}function H(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(d);else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function I(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function J(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function K(a){return R.toByteArray(a)}function L(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function M(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function N(a,b){Q("number"==typeof a,"cannot write a non-number as a number"),Q(a>=0,"specified a negative value for writing an unsigned value"),Q(b>=a,"value is larger than maximum value for type"),Q(Math.floor(a)===a,"value has a fractional component")}function O(a,b,c){Q("number"==typeof a,"cannot write a non-number as a number"),Q(b>=a,"value larger than maximum allowed value"),Q(a>=c,"value smaller than minimum allowed value"),Q(Math.floor(a)===a,"value has a fractional component")}function P(a,b,c){Q("number"==typeof a,"cannot write a non-number as a number"),Q(b>=a,"value larger than maximum allowed value"),Q(a>=c,"value smaller than minimum allowed value")}function Q(a,b){if(!a)throw new Error(b||"Failed assertion")}var R=a("base64-js"),S=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192;var T=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(c){return!1}}();d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null==a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a=a.toString(),b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=H(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=K(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(Q(E(a),"Usage: Buffer.concat(list[, length])"),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.compare=function(a,b){Q(d.isBuffer(a)&&d.isBuffer(b),"Arguments must be Buffers");for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0===c?d.length:Number(c),c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.equals=function(a){return Q(d.isBuffer(a),"Argument must be a Buffer"),0===d.compare(this,a)},d.prototype.compare=function(a){return Q(d.isBuffer(a),"Argument must be a Buffer"),d.compare(this,a)},d.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){Q(d>=c,"sourceEnd < sourceStart"),Q(b>=0&&b<a.length,"targetStart out of bounds"),Q(c>=0&&c<e.length,"sourceStart out of bounds"),Q(d>=0&&d<=e.length,"sourceEnd out of bounds"),d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var f=d-c;if(100>f||!T)for(var g=0;f>g;g++)a[g+b]=this[g+c];else a._set(this.subarray(c,c+f),b)}},d.prototype.slice=function(a,b){var c=this.length;if(a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a),T)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return this.readUInt8(a)},d.prototype.set=function(a,b){return this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(Q(void 0!==a&&null!==a,"missing offset"),Q(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(Q(void 0!==a&&null!==a,"missing offset"),Q(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){return c||(Q(void 0!==a&&null!==a,"missing value"),Q(void 0!==b&&null!==b,"missing offset"),Q(b<this.length,"trying to write beyond buffer length"),N(a,255)),b>=this.length?void 0:(this[b]=a,b+1)},d.prototype.writeUInt16LE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){return x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){return x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){return c||(Q(void 0!==a&&null!==a,"missing value"),Q(void 0!==b&&null!==b,"missing offset"),Q(b<this.length,"Trying to write beyond buffer length"),O(a,127,-128)),b>=this.length?void 0:(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c),b+1)},d.prototype.writeInt16LE=function(a,b,c){return y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){return y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){return z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){return z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){return A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),Q(c>=b,"end < start"),c!==b&&0!==this.length){Q(b>=0&&b<this.length,"start out of bounds"),Q(c>=0&&c<=this.length,"end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=H(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=G(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(T)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var U=d.prototype;d._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=U.get,a.set=U.set,a.write=U.write,a.toString=U.toString,a.toLocaleString=U.toString,a.toJSON=U.toJSON,a.equals=U.equals,a.compare=U.compare,a.copy=U.copy,a.slice=U.slice,a.readUInt8=U.readUInt8,a.readUInt16LE=U.readUInt16LE,a.readUInt16BE=U.readUInt16BE,a.readUInt32LE=U.readUInt32LE,a.readUInt32BE=U.readUInt32BE,a.readInt8=U.readInt8,a.readInt16LE=U.readInt16LE,a.readInt16BE=U.readInt16BE,a.readInt32LE=U.readInt32LE,a.readInt32BE=U.readInt32BE,a.readFloatLE=U.readFloatLE,a.readFloatBE=U.readFloatBE,a.readDoubleLE=U.readDoubleLE,a.readDoubleBE=U.readDoubleBE,a.writeUInt8=U.writeUInt8,a.writeUInt16LE=U.writeUInt16LE,a.writeUInt16BE=U.writeUInt16BE,a.writeUInt32LE=U.writeUInt32LE,a.writeUInt32BE=U.writeUInt32BE,a.writeInt8=U.writeInt8,a.writeInt16LE=U.writeInt16LE,a.writeInt16BE=U.writeInt16BE,a.writeInt32LE=U.writeInt32LE,a.writeInt32BE=U.writeInt32BE,a.writeFloatLE=U.writeFloatLE,a.writeFloatBE=U.writeFloatBE,a.writeDoubleLE=U.writeDoubleLE,a.writeDoubleBE=U.writeDoubleBE,a.fill=U.fill,a.inspect=U.inspect,a.toArrayBuffer=U.toArrayBuffer,a};var V=/[^+\/0-9A-z]/g},{"base64-js":3,ieee754:4}],3:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],4:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],5:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,"function"==typeof console.trace)}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],6:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],7:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],8:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(a,b){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":10}],10:[function(a,b){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":12,"./_stream_writable":14,_process:8,"core-util-is":15,inherits:6}],11:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":13,"core-util-is":15,inherits:6}],12:[function(a,b){(function(c){function d(b){b=b||{};var c=b.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void A.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||null===a?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return y.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||c||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a){var b=a.write(c);!1===b&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(z.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var d=a._readableState;if(d.flowing)throw new Error("Cannot switch to old mode now.");var e=b||!1,f=!1;a.readable=!0,a.pipe=A.prototype.pipe,a.on=a.addListener=A.prototype.on,a.on("readable",function(){f=!0;for(var b;!e&&null!==(b=a.read());)a.emit("data",b);null===b&&(f=!1,a._readableState.needReadable=!0)}),a.pause=function(){e=!0,this.emit("pause")},a.resume=function(){e=!1,f?c.nextTick(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();
else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C;B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;b.length-a<=b.highWaterMark&&(d=!0),(b.ended||b.reading)&&(d=!1),d&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),e},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),(!a._writableState||a._writableState.needDrain)&&o()}function g(b){j(),a.removeListener("error",g),0===z.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?c.nextTick(n):k.once("end",n),a.on("unpipe",d);var o=p(k);return a.on("drain",o),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(g):a._events.error=[g,a._events.error]:a.on("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,c.nextTick(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=A.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{_process:8,buffer:2,"core-util-is":15,events:5,inherits:6,isarray:7,stream:21,"string_decoder/":16}],13:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a);var b=(this._transformState=new c(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./_stream_duplex"),h=a("core-util-is");h.inherits=a("inherits"),h.inherits(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./_stream_duplex":10,"core-util-is":15,inherits:6}],14:[function(a,b){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(b,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void w.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!u.isBuffer(d)&&"string"!=typeof d&&null!==d&&void 0!==d&&!b.objectMode){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new u(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),u.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing?b.buffer.push(new d(c,e,f)):k(a,b,g,c,e,f),h}function k(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){f(e)}):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),d(),c&&s(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(k(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){var c=r(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function t(a,b,d){b.ending=!0,s(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var u=a("buffer").Buffer;f.WritableState=e;var v=a("core-util-is");v.inherits=a("inherits");var w=a("stream");v.inherits(f,w),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),u.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(e=j(this,d,a,b,c)),e},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||t(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":10,_process:8,buffer:2,"core-util-is":15,inherits:6,stream:21}],15:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:2}],16:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){var b=this.charReceived=a.length%2;return this.charLength=b?2:0,b}function g(a){var b=this.charReceived=a.length%3;return this.charLength=b?3:0,b}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="",c=0;this.charLength;){var d=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,c,d),this.charReceived+=d-c,c=d,this.charReceived<this.charLength)return"";b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=b.charCodeAt(b.length-1);if(!(e>=55296&&56319>=e)){if(this.charReceived=this.charLength=0,d==a.length)return b;a=a.slice(d,a.length);break}this.charLength+=this.surrogateSize,b=""}var f=this.detectIncompleteChar(a),g=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-f,g),this.charReceived=f,g-=f),b+=a.toString(this.encoding,0,g);var g=b.length-1,e=b.charCodeAt(g);if(e>=55296&&56319>=e){var h=this.surrogateSize;return this.charLength+=h,this.charReceived+=h,this.charBuffer.copy(this.charBuffer,h,0,h),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,g)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}return b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:2}],17:[function(a,b){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":11}],18:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":10,"./lib/_stream_passthrough.js":11,"./lib/_stream_readable.js":12,"./lib/_stream_transform.js":13,"./lib/_stream_writable.js":14}],19:[function(a,b){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":13}],20:[function(a,b){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":14}],21:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("readable-stream/readable.js"),c.Writable=a("readable-stream/writable.js"),c.Duplex=a("readable-stream/duplex.js"),c.Transform=a("readable-stream/transform.js"),c.PassThrough=a("readable-stream/passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:5,inherits:6,"readable-stream/duplex.js":9,"readable-stream/passthrough.js":17,"readable-stream/readable.js":18,"readable-stream/transform.js":19,"readable-stream/writable.js":20}],22:[function(a,b){(function(){var a;a=function(){function a(a){this.file=a,this.index=0,this.line=1}return a.prototype.nextCommand=function(){var a,b,c,d,e;for(a=[],c="",e=!1,d=!1;!d;){if(b=this.file[this.index],"%"===b){if(e?d=!0:e=!0,0!==c.length)throw new Error("% after "+c+" doesn't make sense");a.push("%")}else"*"===b?(a.push(c),c="",e||(d=!0)):b>=" "&&"~">=b?c+=b:"\n"===b&&this.line++;this.index++}return a},a}(),b.exports=a}).call(this)},{}],23:[function(a,b){(function(){var c,d,e;d=a("xml"),c=a("./plotter"),e=function(a){var b,e,f;e=new c(a);try{f=e.plot()}catch(g){throw b=g}return d(f,{indent:"  "})},b.exports=e}).call(this)},{"./plotter":27,xml:31}],24:[function(a,b){(function(){var a,c,d,e,f,g;c=/[\+-\/x\(\)]/,a=/[\$\d\.]+/,d=new RegExp("("+c.source+")|("+a.source+")","g"),g=function(a){var b;return b=a.match(d)},e=function(b){return a.test(b)},f=function(a){var b,c,d,f,h,i,j;return j=g(a),c=0,i=function(){return j[c]},b=function(a){return a===i()?c++:void 0},h=function(){var a,c;if(c=i(),b(c),e(c))a={type:"n",val:c};else{if("("!==c)throw new SytaxError(""+c+" is unexpected in an arithmetic string");if(a=d(),")"!==i())throw new SytaxError("expected ')'");b(")")}return a},f=function(){var a,c,d;for(a=h(),d=i();"x"===d||"/"===d;)b(d),c=h(),a={type:d,left:a,right:c},d=i();return a},(d=function(){var a,c,d;for(a=f(),d=i();"+"===d||"-"===d;)b(d),c=f(),a={type:d,left:a,right:c},d=i();return a})()},b.exports={tokenize:g,isNumber:e,parse:f}}).call(this)},{}],25:[function(a,b){(function(){var c,d,e,f;e=a("./pad-shapes"),d=a("./macro-calc"),f=a("./unique-id"),c=function(){function a(a){this.modifiers={},this.name=a[0].slice(2),this.blocks=a.slice(1),this.shapes=[],this.masks=[],this.bbox=[null,null,null,null]}return a.prototype.run=function(a,b){var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(null==b&&(b=[]),e=l=0,p=b.length;p>l;e=++l)h=b[e],this.modifiers["$"+(e+1)]=h;for(t=this.blocks,m=0,q=t.length;q>m;m++)c=t[m],this.runBlock(c);for(j="tool-"+a+"-pad-"+f(),i=[],u=this.masks,n=0,r=u.length;r>n;n++)h=u[n],i.push(h);if(this.shapes.length>1){for(d=[{_attr:{id:j}}],v=this.shapes,o=0,s=v.length;s>o;o++)k=v[o],d.push(k);i=[{g:d}]}else if(1===this.shapes.length){for(g in this.shapes[0])this.shapes[0][g]._attr.id=j;i.push(this.shapes[0])}return{pad:i,padId:j,bbox:this.bbox,trace:!1}},a.prototype.runBlock=function(a){var b,c,d,e,f,g,h,i;switch(a[0]){case"$":return e=null!=(i=a.match(/^\$\d+(?=\=)/))?i[0]:void 0,f=a.slice(1+e.length),this.modifiers[e]=this.getNumber(f);case"1":case"2":case"20":case"21":case"22":case"4":case"5":case"6":case"7":for(c=a.split(","),d=g=0,h=c.length;h>g;d=++g)b=c[d],c[d]=this.getNumber(b);return this.primitive(c);default:if("0"!==a[0])throw new SyntaxError("'"+a+"' unrecognized tool macro block")}},a.prototype.primitive=function(a){var b,c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;switch(h=!1,l=!1,n=null,a[0]){case 1:n=e.circle({dia:a[2],cx:a[3],cy:a[4]}),0===a[1]?h=!0:this.addBbox(n.bbox);break;case 2:case 20:n=e.vector({width:a[2],x1:a[3],y1:a[4],x2:a[5],y2:a[6]}),a[7]&&(n.shape.line._attr.transform="rotate("+a[7]+")"),0===a[1]?h=!0:this.addBbox(n.bbox,a[7]);break;case 21:n=e.rect({cx:a[4],cy:a[5],width:a[2],height:a[3]}),a[6]&&(n.shape.rect._attr.transform="rotate("+a[6]+")"),0===a[1]?h=!0:this.addBbox(n.bbox,a[6]);break;case 22:n=e.lowerLeftRect({x:a[4],y:a[5],width:a[2],height:a[3]}),a[6]&&(n.shape.rect._attr.transform="rotate("+a[6]+")"),0===a[1]?h=!0:this.addBbox(n.bbox,a[6]);break;case 4:for(j=[],c=o=3,z=3+2*a[2];z>=o;c=o+=2)j.push([a[c],a[c+1]]);n=e.outline({points:j}),(k=a[a.length-1])&&(n.shape.polygon._attr.transform="rotate("+k+")"),0===a[1]?h=!0:this.addBbox(n.bbox,a[a.length-1]);break;case 5:if(0!==a[6]&&(0!==a[3]||0!==a[4]))throw new RangeError("polygon center must be 0,0 if rotated in macro");n=e.polygon({cx:a[3],cy:a[4],dia:a[5],verticies:a[2],degrees:a[6]}),0===a[1]?h=!0:this.addBbox(n.bbox);break;case 6:if(0!==a[9]&&(0!==a[1]||0!==a[2]))throw new RangeError("moir center must be 0,0 if rotated in macro");if(n=e.moire({cx:a[1],cy:a[2],outerDia:a[3],ringThx:a[4],ringGap:a[5],maxRings:a[6],crossThx:a[7],crossLength:a[8]}),a[9])for(A=n.shape,p=0,s=A.length;s>p;p++)m=A[p],null!=m.line&&(m.line._attr.transform="rotate("+a[9]+")");this.addBbox(n.bbox,a[9]);break;case 7:if(0!==a[9]&&(0!==a[1]||0!==a[2]))throw new RangeError("thermal center must be 0,0 if rotated in macro");if(n=e.thermal({cx:a[1],cy:a[2],outerDia:a[3],innerDia:a[4],gap:a[5]}),a[6])for(B=n.shape,q=0,t=B.length;t>q;q++)if(m=B[q],null!=m.mask)for(C=m.mask,r=0,u=C.length;u>r;r++)g=C[r],null!=g.rect&&(g.rect._attr.transform="rotate("+a[6]+")");this.addBbox(n.bbox,a[6]);break;default:throw new SyntaxError(""+a[0]+" is not a valid primitive code")}if(h){for(d in n.shape)n.shape[d]._attr.fill="#000";if(i="macro-"+this.name+"-mask-"+f(),g={mask:[{_attr:{id:i}},{rect:{_attr:{x:""+this.bbox[0],y:""+this.bbox[1],width:""+(this.bbox[2]-this.bbox[0]),height:""+(this.bbox[3]-this.bbox[1]),fill:"#fff"}}},n.shape]},1===this.shapes.length)for(d in this.shapes[0])this.shapes[0][d]._attr.mask="url(#"+i+")";else if(this.shapes.length>1){for(b=[{_attr:{mask:"url(#"+i+")"}}],D=this.shapes,x=0,v=D.length;v>x;x++)m=D[x],b.push(m);this.shapes=[{g:b}]}return this.masks.push(g)}if(Array.isArray(n.shape)){for(E=n.shape,F=[],y=0,w=E.length;w>y;y++)m=E[y],F.push(null!=m.mask?this.masks.push(m):this.shapes.push(m));return F}return this.shapes.push(n.shape)},a.prototype.addBbox=function(a,b){var c,d,e,f,g,h,i,j,k;if(null==b&&(b=0),b){for(f=Math.sin(b*Math.PI/180),c=Math.cos(b*Math.PI/180),Math.abs(f)<1e-9&&(f=0),Math.abs(c)<1e-9&&(c=0),e=[[a[0],a[1]],[a[2],a[1]],[a[2],a[3]],[a[0],a[3]]],k=[],i=0,j=e.length;j>i;i++)d=e[i],g=d[0]*c-d[1]*f,h=d[0]*f+d[1]*c,(null===this.bbox[0]||g<this.bbox[0])&&(this.bbox[0]=g),(null===this.bbox[1]||h<this.bbox[1])&&(this.bbox[1]=h),(null===this.bbox[2]||g>this.bbox[2])&&(this.bbox[2]=g),k.push(null===this.bbox[3]||h>this.bbox[3]?this.bbox[3]=h:void 0);return k}return(null===this.bbox[0]||a[0]<this.bbox[0])&&(this.bbox[0]=a[0]),(null===this.bbox[1]||a[1]<this.bbox[1])&&(this.bbox[1]=a[1]),(null===this.bbox[2]||a[2]>this.bbox[2])&&(this.bbox[2]=a[2]),null===this.bbox[3]||a[3]>this.bbox[3]?this.bbox[3]=a[3]:void 0},a.prototype.getNumber=function(a){return a.match(/^[+-]?[\d.]+$/)?parseFloat(a):a.match(/^\$\d+$/)?parseFloat(this.modifiers[a]):this.evaluate(d.parse(a))},a.prototype.evaluate=function(a){switch(a.type){case"n":return this.getNumber(a.val);case"+":return this.evaluate(a.left)+this.evaluate(a.right);case"-":return this.evaluate(a.left)-this.evaluate(a.right);case"x":return this.evaluate(a.left)*this.evaluate(a.right);case"/":return this.evaluate(a.left)/this.evaluate(a.right)}},a}(),b.exports=c}).call(this)},{"./macro-calc":24,"./pad-shapes":26,"./unique-id":29}],26:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k;j=a("./unique-id"),c=function(a){var b;if(null==a.dia)throw new SyntaxError("circle function requires diameter");if(null==a.cx)throw new SyntaxError("circle function requires x center");if(null==a.cy)throw new SyntaxError("circle function requires y center");return b=a.dia/2,{shape:{circle:{_attr:{cx:""+a.cx,cy:""+a.cy,r:""+b,"stroke-width":"0",fill:"currentColor"}}},bbox:[a.cx-b,a.cy-b,a.cx+b,a.cy+b]}},h=function(a){var b,c,d,e;if(null==a.width)throw new SyntaxError("rectangle requires width");if(null==a.height)throw new SyntaxError("rectangle requires height");if(null==a.cx)throw new SyntaxError("rectangle function requires x center");if(null==a.cy)throw new SyntaxError("rectangle function requires y center");return d=a.cx-a.width/2,e=a.cy-a.height/2,c={shape:{rect:{_attr:{x:""+d,y:""+e,width:""+a.width,height:""+a.height,"stroke-width":"0",fill:"currentColor"}}},bbox:[d,e,d+a.width,e+a.height]},a.obround&&(b=.5*Math.min(a.width,a.height),c.shape.rect._attr.rx=""+b,c.shape.rect._attr.ry=""+b),c},g=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(null==a.dia)throw new SyntaxError("polygon requires diameter");if(null==a.verticies)throw new SyntaxError("polygon requires verticies");if(null==a.cx)throw new SyntaxError("polygon function requires x center");if(null==a.cy)throw new SyntaxError("polygon function requires y center");for(g=null!=a.degrees?a.degrees*Math.PI/180:0,h=2*Math.PI/a.verticies,d=a.dia/2,c="",l=null,o=null,k=null,n=null,b=p=0,q=a.verticies;q>=0?q>p:p>q;b=q>=0?++p:--p)i=g+b*h,e=d*Math.cos(i),f=d*Math.sin(i),Math.abs(e)<1e-9&&(e=0),Math.abs(f)<1e-9&&(f=0),j=a.cx+e,m=a.cy+f,(l>j||null===l)&&(l=j),(j>k||null===k)&&(k=j),(o>m||null===o)&&(o=m),(m>n||null===n)&&(n=m),c+=" "+j+","+m;return{shape:{polygon:{_attr:{points:c.slice(1),"stroke-width":"0",fill:"currentColor"}}},bbox:[l,o,k,n]}},k=function(a){var b,c,d;if(null==a.x1)throw new SyntaxError("vector function requires start x");if(null==a.y1)throw new SyntaxError("vector function requires start y");if(null==a.x2)throw new SyntaxError("vector function requires end x");if(null==a.y2)throw new SyntaxError("vector function requires end y");if(null==a.width)throw new SyntaxError("vector function requires width");return b=Math.abs(Math.atan((a.y2-a.y1)/(a.x2-a.x1))),c=a.width/2*Math.sin(b),d=a.width/2*Math.cos(b),1e-7>c&&(c=0),1e-7>d&&(d=0),{shape:{line:{_attr:{x1:""+a.x1,x2:""+a.x2,y1:""+a.y1,y2:""+a.y2,"stroke-width":""+a.width,stroke:"currentColor"}}},bbox:[Math.min(a.x1,a.x2)-c,Math.min(a.y1,a.y2)-d,Math.max(a.x1,a.x2)+c,Math.max(a.y1,a.y2)+d]}},d=function(a){if(null==a.width)throw new SyntaxError("lower left rect requires width");if(null==a.height)throw new SyntaxError("lower left rect requires height");if(null==a.x)throw new SyntaxError("lower left rectangle requires x");if(null==a.y)throw new SyntaxError("lower left rectangle requires y");return{shape:{rect:{_attr:{x:""+a.x,y:""+a.y,width:""+a.width,height:""+a.height,"stroke-width":"0",fill:"currentColor"}}},bbox:[a.x,a.y,a.x+a.width,a.y+a.height]}},f=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(!(Array.isArray(a.points)&&a.points.length>1))throw new SyntaxError("outline function requires points array");for(g=null,k=null,f=null,j=null,c="",n=a.points,l=0,m=n.length;m>l;l++){if(b=n[l],!Array.isArray(b)||2!==b.length)throw new SyntaxError("outline function requires points array");d=b[0],h=b[1],(g>d||null===g)&&(g=d),(d>f||null===f)&&(f=d),(k>h||null===k)&&(k=h),(h>j||null===j)&&(j=h),c+=" "+d+","+h}if(e=a.points[a.points.length-1][0],i=a.points[a.points.length-1][1],e!==a.points[0][0]||i!==a.points[0][1])throw new RangeError("last point must match first point of outline");return{shape:{polygon:{_attr:{points:c.slice(1),"stroke-width":"0",fill:"currentColor"}}},bbox:[g,k,f,j]}},e=function(a){var b,c,d;if(null==a.cx)throw new SyntaxError("moir requires x center");if(null==a.cy)throw new SyntaxError("moir requires y center");if(null==a.outerDia)throw new SyntaxError("moir requires outer diameter");if(null==a.ringThx)throw new SyntaxError("moir requires ring thickness");if(null==a.ringGap)throw new SyntaxError("moir requires ring gap");if(null==a.maxRings)throw new SyntaxError("moir requires max rings");if(null==a.crossLength)throw new SyntaxError("moir requires crosshair length");if(null==a.crossThx)throw new SyntaxError("moir requires crosshair thickness");for(d=[{line:{_attr:{x1:""+(a.cx-a.crossLength/2),y1:"0",x2:""+(a.cx+a.crossLength/2),y2:"0","stroke-width":""+a.crossThx,stroke:"currentColor"}}},{line:{_attr:{x1:"0",y1:""+(a.cy-a.crossLength/2),x2:"0",y2:""+(a.cy+a.crossLength/2),"stroke-width":""+a.crossThx,stroke:"currentColor"}}}],b=(a.outerDia-a.ringThx)/2,c=0;b>=a.ringThx&&c<=a.maxRings;)d.push({circle:{_attr:{cx:""+a.cx,cy:""+a.cy,r:""+b,fill:"none","stroke-width":""+a.ringThx,stroke:"currentColor"}}}),c++,b-=a.ringThx+a.ringGap;return b>0&&c<=a.maxRings&&d.push({circle:{_attr:{cx:""+a.cx,cy:""+a.cy,r:""+b,"stroke-width":0,fill:"currentColor"}}}),{shape:d,bbox:[Math.min(a.cx-a.crossLength/2,a.cx-a.outerDia/2),Math.min(a.cy-a.crossLength/2,a.cy-a.outerDia/2),Math.max(a.cx+a.crossLength/2,a.cx+a.outerDia/2),Math.max(a.cy+a.crossLength/2,a.cy+a.outerDia/2)]}},i=function(a){var b,c,d,e,f,g,h,i,k;if(null==a.cx)throw new SyntaxError("thermal requires x center");if(null==a.cy)throw new SyntaxError("thermal requires y center");if(null==a.outerDia)throw new SyntaxError("thermal requires outer diameter");if(null==a.innerDia)throw new SyntaxError("thermal requires inner diameter");if(null==a.gap)throw new SyntaxError("thermal requires gap");return c="thermal-mask-"+j(),f=(a.outerDia-a.innerDia)/2,d=a.outerDia/2,e=d-f/2,h=a.cx-d,g=a.cx+d,k=a.cy-d,i=a.cy+d,b=a.gap/2,{shape:[{mask:[{_attr:{id:c}},{circle:{_attr:{cx:""+a.cx,cy:""+a.cy,r:""+d,"stroke-width":"0",fill:"#fff"}}},{rect:{_attr:{x:""+h,y:""+-b,width:""+a.outerDia,height:""+a.gap,"stroke-width":0,fill:"#000"}}},{rect:{_attr:{x:""+-b,y:""+k,width:""+a.gap,height:""+a.outerDia,"stroke-width":0,fill:"#000"}}}]},{circle:{_attr:{cx:""+a.cx,cy:""+a.cy,r:""+e,fill:"none","stroke-width":""+f,stroke:"currentColor",mask:"url(#"+c+")"}}}],bbox:[h,k,g,i]}},b.exports={circle:c,rect:h,polygon:g,vector:k,lowerLeftRect:d,outline:f,moire:e,thermal:i}}).call(this)},{"./unique-id":29}],27:[function(a,b){(function(){var c,d,e,f,g,h;d=a("./gerber-parser"),h=a("./unique-id"),c=a("./macro-tool"),g=a("./standard-tool"),f=function(a){var b,c,d,e,f,h,i,j,k,l;if(d=null!=(j=a.match(/^ADD\d+/))&&null!=(k=j[0])?k.slice(2):void 0,!(null!=d&&parseInt(d.slice(1),10)>9))throw new SyntaxError(""+d+" is an invalid tool code (must be >= 10)");switch(b=null,c=!1,a.slice(2+d.length,4+d.length)){case"C,":f=a.slice(4+d.length).split("X"),i={dia:parseFloat(f[0])},f.length>2?i.hole={width:parseFloat(f[2]),height:parseFloat(f[1])}:f.length>1&&(i.hole={dia:parseFloat(f[1])}),b=g(d,i);break;case"R,":f=a.slice(4+d.length).split("X"),i={width:parseFloat(f[0]),height:parseFloat(f[1])},f.length>3?i.hole={width:parseFloat(f[3]),height:parseFloat(f[2])}:f.length>2&&(i.hole={dia:parseFloat(f[2])}),b=g(d,i);break;case"O,":f=a.slice(4+d.length).split("X"),i={width:parseFloat(f[0]),height:parseFloat(f[1])},f.length>3?i.hole={width:parseFloat(f[3]),height:parseFloat(f[2])}:f.length>2&&(i.hole={dia:parseFloat(f[2])}),i.obround=!0,b=g(d,i);break;case"P,":f=a.slice(4+d.length).split("X"),i={dia:parseFloat(f[0]),verticies:parseFloat(f[1])},null!=f[2]&&(i.degrees=parseFloat(f[2])),f.length>4?i.hole={width:parseFloat(f[4]),height:parseFloat(f[3])}:f.length>3&&(i.hole={dia:parseFloat(f[3])}),b=g(d,i);break;default:if(e=a.slice(2+d.length),h=null!=(l=e.match(/[a-zA-Z_$][a-zA-Z_$.0-9]{0,126}(?=,)?/))?l[0]:void 0,!h)throw new SyntaxError("invalid definition with macro");f=e.slice(h.length+1).split("X"),1===f.length&&""===f[0]&&(f=null),c={name:h,mods:f}}return{macro:c,tool:b,code:d}},e=function(){function a(a){null==a&&(a=""),this.parser=new d(a),this.macros={},this.tools={},this.currentTool="",this.defs=[],this.gerberId="gerber-"+h(),this.group={g:[{_attr:{id:""+this.gerberId+"-layer-0"}}]},this.layer={level:0,type:"g",current:this.group},this.stepRepeat={x:1,y:1,xStep:null,yStep:null,block:0},this.done=!1,this.units=null,this.format={set:!1,zero:null,notation:null,places:null},this.position={x:0,y:0},this.mode=null,this.trace={region:!1,path:""},this.quad=null,this.bbox={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0}}return a.prototype.plot=function(){for(var a;!this.done;)a=this.parser.nextCommand(),"%"===a[0]?this.parameter(a):this.operate(a[0]);return this.finish()},a.prototype.finish=function(){var a,b,c;return this.finishTrace(),this.finishStepRepeat(),b=parseFloat((this.bbox.xMax-this.bbox.xMin).toPrecision(10)),a=parseFloat((this.bbox.yMax-this.bbox.yMin).toPrecision(10)),c={svg:[{_attr:{xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:""+b+this.units,height:""+a+this.units,viewBox:""+this.bbox.xMin+" "+this.bbox.yMin+" "+b+" "+a,id:this.gerberId}}]},this.defs.length&&c.svg.push({defs:this.defs}),this.group.g[0]._attr.transform="translate(0,"+(this.bbox.yMin+this.bbox.yMax)+") scale(1,-1)",c.svg.push(this.group),c},a.prototype.parameter=function(a){var b,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(e=!1,"%"===a[0]&&"%"!==a[a.length-1])throw new SyntaxError("@parameter should only be called with paramters");for(a=a.slice(1),j=0,D=[];!e;){switch(d=a[j],d.slice(0,2)){case"FS":if(k=!1,this.format.set)throw new SyntaxError("format spec cannot be redefined");try{"L"===d[2]||"T"===d[2]?this.format.zero=d[2]:k=!0,"A"===d[3]||"I"===d[3]?this.format.notation=d[3]:k=!0,"X"===d[4]&&"Y"===d[7]&&d.slice(5,7)===d.slice(8,10)?(this.format.places=[parseInt(d[5],10),parseInt(d[6],10)],(this.format.places[0]>7||this.format.places[1]>7)&&(k=!0)):k=!0
}catch(E){g=E,k=!0}if(k)throw new SyntaxError("invalid format spec");this.format.set=!0;break;case"MO":if(q=d.slice(2),null!=this.units)throw new SyntaxError("gerber file may not redifine units");if("MM"===q)this.units="mm";else{if("IN"!==q)throw new SyntaxError(""+q+" are unrecognized units");this.units="in"}break;case"AD":if(b=f(a[j]),null!=this.tools[b.code])throw new SyntaxError("duplicate tool code");for(b.macro&&(b.tool=this.macros[b.macro.name].run(b.code,b.macro.mods)),this.tools[b.code]={stroke:b.tool.trace,flash:function(a,c){return{use:{_attr:{x:""+a,y:""+c,"xlink:href":"#"+b.tool.padId}}}},bbox:function(a,c){return null==a&&(a=0),null==c&&(c=0),{xMin:a+b.tool.bbox[0],yMin:c+b.tool.bbox[1],xMax:a+b.tool.bbox[2],yMax:c+b.tool.bbox[3]}}},w=b.tool.pad,u=0,v=w.length;v>u;u++)n=w[u],this.defs.push(n);break;case"AM":l=new c(a.slice(0,-1)),this.macros[l.name]=l,e=!0;break;case"SR":this.finishTrace(),this.finishStepRepeat(),this.stepRepeat.x=Number(null!=(x=null!=(y=d.match(/X\d+/))?y[0].slice(1):void 0)?x:1),this.stepRepeat.y=Number(null!=(z=null!=(A=d.match(/Y\d+/))?A[0].slice(1):void 0)?z:1),this.stepRepeat.x>1&&(this.stepRepeat.xStep=Number(null!=(B=d.match(/I[\d\.]+/))?B[0].slice(1):void 0)),this.stepRepeat.y>1&&(this.stepRepeat.yStep=Number(null!=(C=d.match(/J[\d\.]+/))?C[0].slice(1):void 0)),(1!==this.stepRepeat.x||1!==this.stepRepeat.y)&&0===this.layer.level&&(p={g:[{_attr:{id:""+this.gerberId+"-sr-block-"+this.stepRepeat.block}}]},this.layer.current[this.layer.type].push(p),this.layer.current=p);break;case"LP":if(this.finishTrace(),o=d[2],"D"!==o&&"C"!==o)throw new SyntaxError(""+d+" is an unrecognized level polarity");"D"===o&&"mask"===this.layer.type?(h=""+this.gerberId+"-layer-"+ ++this.layer.level,this.group={g:[{_attr:{id:h}},this.group]},this.layer.current=this.group,this.layer.type="g"):"C"===o&&"g"===this.layer.type&&(m=""+this.gerberId+"-layer-"+ ++this.layer.level,s=""+this.bbox.xMin,t=""+this.bbox.yMin,r=""+(this.bbox.xMax-this.bbox.xMin),i=""+(this.bbox.yMax-this.bbox.yMin),l={mask:[{_attr:{id:m,color:"#000"}},{rect:{_attr:{x:s,y:t,width:r,height:i,fill:"#fff"}}}]},this.defs.push(l),this.layer.current.g[0]._attr.mask="url(#"+m+")",this.layer.current=this.defs[this.defs.length-1],this.layer.type="mask"),this.position.x=null,this.position.y=null}D.push("%"===a[++j]?e=!0:void 0)}return D},a.prototype.operate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;if(t=!1,d=a.slice(0,3),"M"===a[0]){if("M02"===d)this.done=!0,a="";else if("M00"!==d&&"M01"!==d)throw new SyntaxError("invalid operation M code");t=!0}else if("G"===a[0]){if(a.match(/^G0?1/))this.mode="i";else if(a.match(/^G0?2/))this.mode="cw";else if(a.match(/^G0?3(?![67])/))this.mode="ccw";else if("G36"===d)this.finishTrace(),this.trace.region=!0;else if("G37"===d)this.finishTrace(),this.trace.region=!1;else if("G74"===d)this.quad="s";else if("G75"===d)this.quad="m";else if(!d.match(/^G(0?4)|(5[45])|(7[01])|(9[01])/))throw new SyntaxError("invalid operation G code");t=!0}if(p=null!=(E=a.match(/D[1-9]\d{1,}$/))?E[0]:void 0,null!=p){if(this.finishTrace(),null==this.tools[p])throw new SyntaxError("tool "+p+" does not exist");if(this.trace.region)throw new SyntaxError("cannot change tool while region mode is on");this.currentTool=p}if(a.match(/^(G0?[123])?([XYIJ][+-]?\d+){0,4}D0?[123]$/)){if(k=a[a.length-1],e=null!=(F=a.match(/[XYIJ][+-]?\d+/g))?F.join(""):void 0,n={x:this.position.x,y:this.position.y},i=this.move(e),"3"===k)return this.finishTrace(),this.layer.current[this.layer.type].push(this.tools[this.currentTool].flash(this.position.x,this.position.y)),this.addBbox(this.tools[this.currentTool].bbox(this.position.x,this.position.y));if("1"===k){if(this.trace.path||(this.trace.path="M"+n.x+" "+n.y,"i"===this.mode&&this.addBbox(this.trace.region?{xMin:n.x,yMin:n.y,xMax:n.x,yMax:n.y}:this.tools[this.currentTool].bbox(n.x,n.y))),"i"===this.mode)return this.trace.path+="L"+i.x+" "+i.y,this.addBbox(this.trace.region?{xMin:i.x,yMin:i.y,xMax:i.x,yMax:i.y}:this.tools[this.currentTool].bbox(i.x,i.y));if("cw"===this.mode||"ccw"===this.mode){if(l=Math.sqrt(Math.pow(i.i,2)+Math.pow(i.j,2)),o="cw"===this.mode?0:1,j=0,c=[],r=0,s=0,"s"===this.quad)for(I=[n.x-i.i,n.x+i.i],y=0,B=I.length;B>y;y++)for(f=I[y],J=[n.y-i.j,n.y+i.j],z=0,C=J.length;C>z;z++)g=J[z],h=Math.sqrt(Math.pow(f-i.x,2)+Math.pow(g-i.y,2)),Math.abs(l-h)<1e-7&&c.push({x:f,y:g});else"m"===this.quad&&c.push({x:n.x+i.i,y:n.y+i.j});for(A=0,D=c.length;D>A;A++)if(b=c[A],r=Math.atan2(i.y-b.y,i.x-b.x),0>r&&(r+=2*Math.PI),s=Math.atan2(n.y-b.y,n.x-b.x),0>s&&(s+=2*Math.PI),"cw"===this.mode&&r>s?s+=2*Math.PI:"ccw"===this.mode&&s>r&&(r+=2*Math.PI),q=Math.abs(r-s),!("s"===this.quad&&Math.abs(r-s)>Math.PI/2)){"m"===this.quad&&q>=Math.PI&&(j=1),c={x:b.x,y:b.y};break}return m=this.trace.region?0:this.tools[this.currentTool].bbox().xMax,v=s<=(K=Math.PI)&&r>=K||s>=(L=Math.PI)&&L>=r?c.x-l-m:Math.min(n.x,i.x)-m,u=s<=(M=2*Math.PI)&&r>=M||s>=(N=2*Math.PI)&&N>=r||0>=s&&r>=0||s>=0&&0>=r?c.x+l+m:Math.max(n.x,i.x)+m,x=s<=(O=3*Math.PI/2)&&r>=O||s>=(P=3*Math.PI/2)&&P>=r?c.y-l-m:Math.min(n.y,i.y)-m,w=s<=(G=Math.PI/2)&&r>=G||s>=(H=Math.PI/2)&&H>=r?c.y+l+m:Math.max(n.y,i.y)+m,"m"===this.quad&&Math.abs(n.x-i.x)<1e-6&&Math.abs(n.y-i.y)<1e-6&&(this.trace.path+="A"+l+" "+l+" 0 0 "+o+" "+(i.x+2*i.i)+" "+(i.y+2*i.j),v=c.x-l-m,x=c.y-l-m,u=c.x+l+m,w=c.y+l+m),this.trace.path+="A"+l+" "+l+" 0 "+j+" "+o+" "+i.x+" "+i.y,this.addBbox({xMin:v,yMin:x,xMax:u,yMax:w})}throw new SyntaxError("cannot interpolate without a G01/2/3")}if("2"===k)return this.finishTrace();throw new SyntaxError(""+k+" is an invalid operation (D) code")}},a.prototype.finishStepRepeat=function(){var a,b,c,d,e,f;if(1!==this.stepRepeat.x||1!==this.stepRepeat.y){if(0!==this.layer.level)throw new Error("step repeat with clear levels is unimplimented");for(a=this.layer.current.g[0]._attr.id,this.layer.current=this.group,f=[],b=d=0,e=this.stepRepeat.x;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(function(){var d,e,f;for(f=[],c=d=0,e=this.stepRepeat.y;e>=0?e>d:d>e;c=e>=0?++d:--d)f.push(0!==b||0!==c?this.layer.current[this.layer.type].push({use:{_attr:{x:""+b*this.stepRepeat.xStep,y:""+c*this.stepRepeat.yStep,"xlink:href":a}}}):void 0);return f}.call(this));return f}},a.prototype.finishTrace=function(){var a,b,c,d;if(this.trace.path){if(b={path:{_attr:{d:this.trace.path}}},this.trace.region)b.path._attr["stroke-width"]="0",b.path._attr.fill="currentColor";else{d=this.tools[this.currentTool].stroke;for(a in d)c=d[a],b.path._attr[a]=c}return this.layer.current[this.layer.type].push(b),this.trace.path=""}},a.prototype.move=function(a){var b;if(null==this.units)throw new Error("units have not been set");return b=this.coordinate(a),this.position.x=b.x,this.position.y=b.y,b},a.prototype.coordinate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(!this.format.set)throw new SyntaxError("format undefined");d={x:0,y:0},d.x=null!=(f=a.match(/X[+-]?\d+/))&&null!=(g=f[0])?g.slice(1):void 0,d.y=null!=(h=a.match(/Y[+-]?\d+/))&&null!=(i=h[0])?i.slice(1):void 0,d.i=null!=(j=a.match(/I[+-]?\d+/))&&null!=(k=j[0])?k.slice(1):void 0,d.j=null!=(l=a.match(/J[+-]?\d+/))&&null!=(m=l[0])?m.slice(1):void 0;for(c in d)if(e=d[c],null!=e){if(b=1,("+"===e[0]||"-"===e[0])&&("-"===e[0]&&(b=-1),e=e.slice(1)),"L"===this.format.zero)b*=Math.pow(10,this.format.places[1]);else{if("T"!==this.format.zero)throw new SyntaxError("invalid zero suppression format");b*=Math.pow(10,e.length-this.format.places[0])}d[c]=Number(e)/b,"I"===this.format.notation&&(d[c]+=null!=(n=this.position[c])?n:0)}return null==d.x&&(d.x=this.position.x),null==d.y&&(d.y=this.position.y),null==d.i&&(d.i=0),null==d.j&&(d.j=0),d},a.prototype.addBbox=function(a){return a.xMin<this.bbox.xMin&&(this.bbox.xMin=a.xMin),a.yMin<this.bbox.yMin&&(this.bbox.yMin=a.yMin),a.xMax>this.bbox.xMax&&(this.bbox.xMax=a.xMax),a.yMax>this.bbox.yMax?this.bbox.yMax=a.yMax:void 0},a}(),b.exports=e}).call(this)},{"./gerber-parser":22,"./macro-tool":25,"./standard-tool":28,"./unique-id":29}],28:[function(a,b){(function(){var c,d,e;e=a("./unique-id"),c=a("./pad-shapes"),d=function(a,b){var d,f,g,h,i,j,k;if(j={pad:[],trace:!1},b.cx=0,b.cy=0,f="tool-"+a+"-pad-"+e(),k="",null!=b.dia&&null==b.verticies){if(null!=b.obround||null!=b.width||null!=b.height||null!=b.degrees)throw new Error("incompatible parameters for tool "+a);if(b.dia<0)throw new RangeError(""+a+" circle diameter out of range ("+b.dia+"<0)");k="circle",null==b.hole&&(j.trace={"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":""+b.dia,stroke:"currentColor",fill:"none"})}else if(null!=b.width&&null!=b.height){if(null!=b.dia||null!=b.verticies||null!=b.degrees)throw new Error("incompatible parameters for tool "+a);if(b.width<=0)throw new RangeError(""+a+" rect width out of range ("+b.width+"<=0)");if(b.height<=0)throw new RangeError(""+a+" rect height out of range ("+b.height+"<=0)");k="rect",null!=b.hole||b.obround||(j.trace={"stroke-width":"0"})}else{if(null==b.dia||null==b.verticies)throw new Error("unidentified standard tool shape");if(null!=b.obround||null!=b.width||null!=b.height)throw new Error("incompatible parameters for tool "+a);if(b.verticies<3||b.verticies>12)throw new RangeError(""+a+" polygon points out of range ("+b.verticies+"<3 or >12)]");k="polygon"}if(i=c[k](b),null!=b.hole){if(d=null,null!=b.hole.dia&&null==b.hole.width&&null==b.hole.height){if(!(b.hole.dia>=0))throw new RangeError(""+a+" hole diameter out of range ("+b.hole.dia+"<0)");d=c.circle({cx:b.cx,cy:b.cy,dia:b.hole.dia}),d=d.shape,d.circle._attr.fill="#000"}else{if(null==b.hole.width||null==b.hole.height)throw new Error(""+a+" has invalid hole parameters");if(!(b.hole.width>=0))throw new RangeError(""+a+" hole width out of range ("+b.hole.width+"<0)");if(!(b.hole.height>=0))throw new RangeError(""+a+" hole height out of range");d=c.rect({cx:b.cx,cy:b.cy,width:b.hole.width,height:b.hole.height}),d=d.shape,d.rect._attr.fill="#000"}h=f+"-mask",g={mask:[{_attr:{id:f+"-mask"}},{rect:{_attr:{x:""+i.bbox[0],y:""+i.bbox[1],width:""+(i.bbox[2]-i.bbox[0]),height:""+(i.bbox[3]-i.bbox[1]),fill:"#fff"}}},d]},i.shape[k]._attr.mask="url(#"+h+")",j.pad.push(g)}return f&&(i.shape[k]._attr.id=f),j.pad.push(i.shape),j.bbox=i.bbox,j.padId=f,j},b.exports=d}).call(this)},{"./pad-shapes":26,"./unique-id":29}],29:[function(a,b){(function(){var a,c;c=1e3,a=function(){return c++},b.exports=a}).call(this)},{}],30:[function(a,b){function c(a){return a&&a.replace?a.replace(/([&"<>'])/g,function(a,b){return d[b]}):a}var d={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};b.exports=c},{}],31:[function(a,b){(function(c){function d(a,b){function d(a){q?c.nextTick(a):a()}function e(a,b){if(void 0!==b&&(n+=b),a&&!o&&(m=m||new k,o=!0),a&&o){var c=n;d(function(){m.emit("data",c)}),n=""}}function f(a,b){h(e,g(a,p,p?1:0),b)}function i(){if(m){var a=n;d(function(){m.emit("data",a)}),m.emit("end"),m.readable=!1,m.emit("close")}}function j(a){var b=a.encoding||"UTF-8",c={version:"1.0",encoding:b};a.standalone&&(c.standalone=a.standalone),f({"?xml":{_attr:c}}),n=n.replace("/>","?>")}"object"!=typeof b&&(b={indent:b});var m=b.stream?new k:null,n="",o=!1,p=b.indent?b.indent===!0?l:b.indent:"",q=!0;return d(function(){q=!1}),b.declaration&&j(b.declaration),a&&a.forEach?a.forEach(function(b,c){var d;c+1===a.length&&(d=i),f(b,d)}):f(a,i),m?(m.readable=!0,m):n}function e(){var a=Array.prototype.slice.call(arguments),b={_elem:g(a)};return b.push=function(a){if(!this.append)throw new Error("not assigned to a parent!");var b=this,c=this._elem.indent;h(this.append,g(a,c,this._elem.icount+(c?1:0)),function(){b.append(!0)})},b.close=function(a){void 0!==a&&this.push(a),this.end&&this.end()},b}function f(a,b){return new Array(b||0).join(a||"")}function g(a,b,c){function d(a){var b=Object.keys(a);b.forEach(function(b){o.push(i(b,a[b]))})}c=c||0;var e,h=f(b,c),k=a,l=!1;if("object"==typeof a){var m=Object.keys(a);if(e=m[0],k=a[e],k._elem)return k._elem.name=e,k._elem.icount=c,k._elem.indent=b,k._elem.indents=h,k._elem.interrupt=k,k._elem}var n,o=[],p=[];switch(typeof k){case"object":if(null===k)break;k._attr&&d(k._attr),k._cdata&&p.push(("<![CDATA["+k._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),k.forEach&&(n=!1,p.push(""),k.forEach(function(a){if("object"==typeof a){var e=Object.keys(a)[0];"_attr"==e?d(a._attr):p.push(g(a,b,c+1))}else p.pop(),n=!0,p.push(j(a))}),n||p.push(""));break;default:p.push(j(k))}return{name:e,interrupt:l,attributes:o,content:p,icount:c,indents:h,indent:b}}function h(a,b,c){function d(){for(;b.content.length;){var d=b.content.shift();if(void 0!==d){if(e(d))return;h(a,d)}}a(!1,(f>1?b.indents:"")+(b.name?"</"+b.name+">":"")+(b.indent&&!c?"\n":"")),c&&c()}function e(b){return b.interrupt?(b.interrupt.append=a,b.interrupt.end=d,b.interrupt=!1,a(!0),!0):!1}if("object"!=typeof b)return a(!1,b);var f=b.interrupt?1:b.content.length;return a(!1,b.indents+(b.name?"<"+b.name:"")+(b.attributes.length?" "+b.attributes.join(" "):"")+(f?b.name?">":"":b.name?"/>":"")+(b.indent&&f>1?"\n":"")),f?void(e(b)||d()):a(!1,b.indent?"\n":"")}function i(a,b){return a+'="'+j(b)+'"'}var j=a("./escapeForXML"),k=a("stream").Stream,l="    ";b.exports=d,b.exports.element=b.exports.Element=e}).call(this,a("_process"))},{"./escapeForXML":30,_process:8,stream:21}]},{},[1]);